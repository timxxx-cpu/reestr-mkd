# –†–µ–µ—Å—Ç—Ä –ú–ö–î ‚Äî –°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –º–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã—Ö –¥–æ–º–æ–≤

> **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥, –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL (DEV: Supabase)  
> **–í–µ—Ä—Å–∏—è:** 1.0.1  
> **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ –∂–∏–ª—ã—Ö –∫–æ–º–ø–ª–µ–∫—Å–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—ç—Ç–∞–ø–Ω—ã—Ö —Ä–µ–µ—Å—Ç—Ä–æ–≤

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**reestr-mkd** ‚Äî —ç—Ç–æ web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤–µ–¥–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ –∂–∏–ª—ã—Ö –∫–æ–º–ø–ª–µ–∫—Å–æ–≤ –∏ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –ø–æ—à–∞–≥–æ–≤—ã–º –ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–º workflow.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–∞—Å–ø–æ—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞** ‚Äî –≤–≤–æ–¥ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ñ–ö (–∞–¥—Ä–µ—Å, –¥–∞—Ç—ã, –∫–∞–¥–∞—Å—Ç—Ä, —É—á–∞—Å—Ç–Ω–∏–∫–∏)
- **–°–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞** ‚Äî —É—á–µ—Ç –∑–¥–∞–Ω–∏–π, –±–ª–æ–∫–æ–≤, —Ç–∏–ø–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- **–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è —ç—Ç–∞–∂–µ–π, –ø–æ–¥—ä–µ–∑–¥–æ–≤, –ø–æ–º–µ—â–µ–Ω–∏–π, –ú–û–ü
- **–ö–≤–∞—Ä—Ç–∏—Ä–æ–≥—Ä–∞—Ñ–∏—è** ‚Äî –Ω—É–º–µ—Ä–∞—Ü–∏—è –∫–≤–∞—Ä—Ç–∏—Ä –∏ –º–∞—à–∏–Ω–æ–º–µ—Å—Ç
- **UJ-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** ‚Äî —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ü—Ä–æ–µ–∫—Ç-–ó–¥–∞–Ω–∏–µ-–ü–æ–º–µ—â–µ–Ω–∏–µ)
- **–†–µ–µ—Å—Ç—Ä—ã** ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–¥–Ω—ã—Ö —Ä–µ–µ—Å—Ç—Ä–æ–≤ –ø–æ –∫–≤–∞—Ä—Ç–∏—Ä–∞–º, –∫–æ–º–º–µ—Ä—Ü–∏–∏, –ø–∞—Ä–∫–∏–Ω–≥—É
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–æ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- **Workflow** ‚Äî –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

---

## üèóÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend
- **React 18** ‚Äî UI framework
- **Vite 7** ‚Äî build tool –∏ dev server
- **React Router 7** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **TanStack React Query 5** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Tailwind CSS 3** ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Zod 4** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º
- **Lucide React** ‚Äî –∏–∫–æ–Ω–∫–∏
- **Recharts 3** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### Backend/Data (DEV)
- **Supabase** ‚Äî PostgreSQL + REST API + RLS
- **@supabase/supabase-js 2.93** ‚Äî –∫–ª–∏–µ–Ω—Ç
- **PostgreSQL** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å—Ö–µ–º–∞ –≤ `db/reset_schema.sql`)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Node.js test runner** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- Smoke tests –¥–ª—è workflow
- Contract tests –¥–ª—è —Å—Ö–µ–º

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- npm –∏–ª–∏ yarn
- –î–æ—Å—Ç—É–ø –∫ Supabase –ø—Ä–æ–µ–∫—Ç—É (–¥–ª—è DEV)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd reestr-mkd

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env —Å –≤–∞—à–∏–º–∏ credentials –æ—Ç Supabase

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev server
npm run dev
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å reset_schema.sql –≤ –≤–∞—à–µ–º Supabase –ø—Ä–æ–µ–∫—Ç–µ
# —á–µ—Ä–µ–∑ SQL Editor –∏–ª–∏ psql
psql -h <host> -U postgres -d postgres -f db/reset_schema.sql
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
reestr-mkd/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/          # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ editors/        # –†–µ–¥–∞–∫—Ç–æ—Ä—ã —à–∞–≥–æ–≤ workflow
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ configurator/  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä—ã –∑–¥–∞–Ω–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ registry/      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–µ—Å—Ç—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/          # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/             # UI Kit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ context/            # React Context –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ project/        # –°–ª–æ–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ hooks/              # Custom hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/           # –ü—Ä—è–º—ã–µ API —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ registry/      # –•—É–∫–∏ –¥–ª—è —Ä–µ–µ—Å—Ç—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/           # API –º–æ–¥—É–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api-service.js # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π API —Ñ–∞—Å–∞–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.js   # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—Ä–æ–ª–∏, —Å—Ç–∞—Ç—É—Å—ã, —à–∞–≥–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.js     # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ workflow-state-machine.js  # State machine –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...            # –î—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx             # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.jsx            # Entry point
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îî‚îÄ‚îÄ reset_schema.sql    # –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î (destructive reset)
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ README.md          # –ò–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ project-full-architecture.md
‚îÇ   ‚îú‚îÄ‚îÄ project-full-db-schema.md
‚îÇ   ‚îú‚îÄ‚îÄ project-full-workflow.md
‚îÇ   ‚îú‚îÄ‚îÄ project-full-code-structure.md
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ workflow-smoke.test.mjs
‚îÇ   ‚îî‚îÄ‚îÄ schema-contract.test.mjs
‚îî‚îÄ‚îÄ package.json
```

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢—Ä–µ—Ö—Å–ª–æ–π–Ω–∞—è –º–æ–¥–µ–ª—å ProjectContext

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–æ –Ω–∞ —Ç—Ä–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–ª–æ—è:

1. **Data Layer** (`useProjectDataLayer`)
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ readonly –ø–æ —Ä–æ–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—É
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ snapshot

2. **Sync Layer** (`useProjectSyncLayer`)
   - –û—á–µ—Ä–µ–¥—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π (debounce + manual flush)
   - –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - Batch-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
   - –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è refetch

3. **Workflow Layer** (`useProjectWorkflowLayer`)
   - –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∏—Å—Ç–æ—Ä–∏–∏
   - –ö–æ–Ω—Ç—Ä–æ–ª—å —ç—Ç–∞–ø–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### Workflow –ø—Ä–æ—Ü–µ—Å—Å

**17 —à–∞–≥–æ–≤** (–∏–Ω–¥–µ–∫—Å—ã 0-16), —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã—Ö –Ω–∞ **4 —ç—Ç–∞–ø–∞**:

- **–≠—Ç–∞–ø 1** (—à–∞–≥–∏ 0-5): –ü–∞—Å–ø–æ—Ä—Ç –∏ —Å–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞
- **–≠—Ç–∞–ø 2** (—à–∞–≥–∏ 6-8): –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∏ –Ω—É–º–µ—Ä–∞—Ü–∏—è
- **–≠—Ç–∞–ø 3** (—à–∞–≥–∏ 9-11): –†–µ–µ—Å—Ç—Ä—ã –ø–æ–º–µ—â–µ–Ω–∏–π
- **–≠—Ç–∞–ø 4** (—à–∞–≥–∏ 12-16): –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Å–≤–æ–¥–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

**–°—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–∫–∏:**
- `NEW` ‚Äî –Ω–æ–≤–∞—è –∑–∞—è–≤–∫–∞
- `DRAFT` ‚Äî –≤ —Ä–∞–±–æ—Ç–µ
- `REVIEW` ‚Äî –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ (–≥—Ä–∞–Ω–∏—Ü–∞ —ç—Ç–∞–ø–∞)
- `APPROVED` ‚Äî –ø—Ä–∏–Ω—è—Ç–æ
- `REJECTED` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
- `INTEGRATION` ‚Äî —ç—Ç–∞–ø –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `COMPLETED` ‚Äî –∑–∞–∫—Ä—ã—Ç–∞

**–†–æ–ª–∏:**
- `admin` ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- `controller` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ (readonly –Ω–∞ —Ñ–æ—Ä–º–∞—Ö)
- `technician` ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–∞—Ö

---

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞

–ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `db/reset_schema.sql` –∏ –≤–∫–ª—é—á–∞–µ—Ç:

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `projects` ‚Äî –ø—Ä–æ–µ–∫—Ç—ã/–ñ–ö
- `applications` ‚Äî –∑–∞—è–≤–∫–∏ —Å workflow
- `application_steps` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —à–∞–≥–∞–º
- `application_history` ‚Äî –∂—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π

**–°–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Å–∞:**
- `buildings` ‚Äî –∑–¥–∞–Ω–∏—è/—Å–æ–æ—Ä—É–∂–µ–Ω–∏—è
- `building_blocks` ‚Äî –±–ª–æ–∫–∏ –∑–¥–∞–Ω–∏–π
- `block_construction` ‚Äî –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤
- `block_engineering` ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- `basements` ‚Äî –ø–æ–¥–≤–∞–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏

**–ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è:**
- `floors` ‚Äî —ç—Ç–∞–∂–∏
- `entrances` ‚Äî –ø–æ–¥—ä–µ–∑–¥—ã
- `entrance_matrix` ‚Äî –º–∞—Ç—Ä–∏—Ü–∞ —ç—Ç–∞–∂/–ø–æ–¥—ä–µ–∑–¥
- `units` ‚Äî –ø–æ–º–µ—â–µ–Ω–∏—è (–∫–≤–∞—Ä—Ç–∏—Ä—ã, –æ—Ñ–∏—Å—ã, –ø–∞—Ä–∫–∏–Ω–≥)
- `rooms` ‚Äî —ç–∫—Å–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ–º–µ—â–µ–Ω–∏–π
- `common_areas` ‚Äî –ú–û–ü (–º–µ—Å—Ç–∞ –æ–±—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (dict_*):**
- –°—Ç–∞—Ç—É—Å—ã, —Ç–∏–ø—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Å–∏—Å—Ç–µ–º—ã
- –¢–∏–ø—ã –ø–æ–º–µ—â–µ–Ω–∏–π, –∫–æ–º–Ω–∞—Ç, –ú–û–ü
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **UUID primary keys** –Ω–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
- **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è upsert** ‚Äî `UNIQUE` constraints –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **RLS –≤–∫–ª—é—á–µ–Ω** ‚Äî Row Level Security (–≤ DEV —Å –ø–æ–ª–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º)
- **JSONB –ø–æ–ª—è** ‚Äî `integration_data` –¥–ª—è –≥–∏–±–∫–∏—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
- **Cascading deletes** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Reset —Å—Ö–µ–º—ã

```bash
# –í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!
psql -h <host> -U postgres -d postgres -f db/reset_schema.sql
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: `docs/db-reset-runbook.md`

---

## üîÑ Workflow –ª–æ–≥–∏–∫–∞

### State Machine –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `src/lib/workflow-state-machine.js`:

**COMPLETE_STEP** ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞:
1. –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥ ‚Üí `COMPLETED`
2. –ï—Å–ª–∏ –≥—Ä–∞–Ω–∏—Ü–∞ —ç—Ç–∞–ø–∞ ‚Üí `REVIEW` + –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø
3. –ï—Å–ª–∏ —Å—Ç–∞—Ä—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—à–∞–≥ 12) ‚Üí `INTEGRATION`
4. –ò–Ω–∞—á–µ ‚Üí –æ—Å—Ç–∞–µ—Ç—Å—è –≤ `DRAFT`

**ROLLBACK_STEP** ‚Äî –æ—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥:
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —à–∞–≥ –Ω–∞–∑–∞–¥
- –°—Ç–∞—Ç—É—Å ‚Üí `DRAFT` (–µ—Å–ª–∏ –±—ã–ª `REVIEW` –∏–ª–∏ `COMPLETED`)

**REVIEW_APPROVE** ‚Äî –ø—Ä–∏–Ω—è—Ç–∏–µ —ç—Ç–∞–ø–∞:
- –°—Ç–∞—Ç—É—Å ‚Üí `DRAFT` (–∏–ª–∏ `INTEGRATION` –¥–ª—è —à–∞–≥–∞ 12)
- –≠—Ç–∞–ø –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–º

**REVIEW_REJECT** ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É:
- –°—Ç–∞—Ç—É—Å ‚Üí `REJECTED`
- –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç—Ç–∞–ø
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —ç—Ç–∞–ø–∞

### –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ `application_history` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º:
- –î–µ–π—Å—Ç–≤–∏—è (action)
- –ü—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏ –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- –í—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `docs/`:

| –î–æ–∫—É–º–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| [README.md](docs/README.md) | –ò–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
| [project-full-architecture.md](docs/project-full-architecture.md) | –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã |
| [project-full-db-schema.md](docs/project-full-db-schema.md) | –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î |
| [project-full-workflow.md](docs/project-full-workflow.md) | Workflow –∏ state machine |
| [project-full-code-structure.md](docs/project-full-code-structure.md) | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ |
| [uj-identifiers.md](docs/uj-identifiers.md) | –°–∏—Å—Ç–µ–º–∞ UJ-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ |
| [uj-full-identifiers-display.md](docs/uj-full-identifiers-display.md) | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ UI |
| [schema-code-audit.md](docs/schema-code-audit.md) | –ê—É–¥–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ö–µ–º—ã –∏ –∫–æ–¥–∞ |
| [db-reset-runbook.md](docs/db-reset-runbook.md) | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±—Ä–æ—Å—É –ë–î |
| [upsert-on-conflict.md](docs/upsert-on-conflict.md) | –°—Ç—Ä–∞—Ç–µ–≥–∏—è upsert –æ–ø–µ—Ä–∞—Ü–∏–π |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ smoke-—Ç–µ—Å—Ç–æ–≤ workflow
npm run test:smoke
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ state machine
- –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è workflow
- –í–∞–ª–∏–¥–∞—Ü–∏—é —Å—Ö–µ–º –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã API

---

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–∫—Ä–∏–ø—Ç—ã

```bash
npm run dev      # –ó–∞–ø—É—Å–∫ dev server (http://localhost:5173)
npm run build    # Production build
npm run preview  # –ü—Ä–æ—Å–º–æ—Ç—Ä production build
npm run lint     # ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run test:smoke  # –ó–∞–ø—É—Å–∫ smoke-—Ç–µ—Å—Ç–æ–≤
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase

–í `.env` —Ñ–∞–π–ª–µ:

```env
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —à–∞–≥–æ–≤

1. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `STEPS_CONFIG` (`src/lib/constants.js`)
2. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤ `src/components/editors/`
3. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ `App.jsx` ‚Üí `renderStepContent()`
4. –°–æ–∑–¥–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –≤ `src/lib/step-validators.js`
5. –û–±–Ω–æ–≤–∏—Ç—å workflow stage boundaries –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (DEV)

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è RLS –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø** –¥–ª—è `anon` –∏ `authenticated` —Ä–æ–ª–µ–π.

**–≠—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ –¢–û–õ–¨–ö–û –¥–ª—è DEV/TEST –æ–∫—Ä—É–∂–µ–Ω–∏—è!**

–î–ª—è production –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `scope_id` –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ–ª–∏ –∏ permissions –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
- –í–Ω–µ–¥—Ä–∏—Ç—å –∞—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

## üìä –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ PostgreSQL

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –°—Ö–µ–º–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ PostgreSQL
- ‚úÖ DEV –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞ Supabase
- ‚úÖ Upsert —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (dev-—Ä–µ–∂–∏–º)
- ‚è≥ Production –º–∏–≥—Ä–∞—Ü–∏—è ‚Äî –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- ‚è≥ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ ‚Äî –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- ‚è≥ Backup –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 9 —Ñ–µ–≤—Ä–∞–ª—è 2026
