# üîç –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –ø—Ä–æ–µ–∫—Ç–∞ "–†–µ–µ—Å—Ç—Ä –ú–ö–î"

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 8 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** AI Assistant (Claude Sonnet 4.5)  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 1.0.1  
**–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤:** 96 JS/JSX —Ñ–∞–π–ª–æ–≤

---

## üìä –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **–û—Ç–ª–∏—á–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (data/sync/workflow)
2. **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤ `/docs`
3. **–¢–µ—Å—Ç—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç** ‚Äî workflow smoke tests –ø—Ä–æ—Ö–æ–¥—è—Ç (7/7)
4. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫** ‚Äî React 18, Vite 7, TanStack Query, Zod
5. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** ‚Äî `UPSERT_ON_CONFLICT` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
6. **–õ–∏–Ω—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω** ‚Äî —Ç–æ–ª—å–∫–æ 6 warnings, 0 errors

### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:** –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (`.env` –∑–∞–∫–æ–º–º–∏—á–µ–Ω)
2. **–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:** Bundle size 1.24 MB (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π)
3. **–ö–û–ù–°–û–õ–¨:** 13 —Ñ–∞–π–ª–æ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç `console.log/error/warn`
4. **–û–®–ò–ë–ö–ò –û–ë–†–ê–ë–û–¢–ö–ò:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ catch-–±–ª–æ–∫–∏ –ø—É—Å—Ç—ã–µ –∏–ª–∏ —Ç–æ–ª—å–∫–æ —Å console.error
5. **–ú–û–ë–ò–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. –ù–µ—Ç TypeScript (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JSDoc, –Ω–æ –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
2. –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
3. –ù–µ—Ç E2E —Ç–µ—Å—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ smoke tests)
4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ (300-500+ —Å—Ç—Ä–æ–∫)
5. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ re-renders –≤ React

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

**–§–∞–π–ª:** `.env`

```env
VITE_SUPABASE_URL=https://rhfllxqyjgvlodnxlgvz.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGc...
```

### –û–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ö†Ô∏è **CRITICAL:** –ü—É–±–ª–∏—á–Ω—ã–π Supabase –∫–ª—é—á –≤ Git-–∏—Å—Ç–æ—Ä–∏–∏
- –õ—é–±–æ–π —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ë–î
- –î–∞–∂–µ –µ—Å–ª–∏ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª, –æ–Ω –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ Git

### –†–µ—à–µ–Ω–∏–µ

1. **–ù–ï–ú–ï–î–õ–ï–ù–ù–û:**
   ```bash
   # –£–¥–∞–ª–∏—Ç—å .env –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   git rm .env
   git commit -m "Remove sensitive .env file"
   
   # –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ .gitignore —Å–æ–¥–µ—Ä–∂–∏—Ç .env
   echo ".env" >> .gitignore
   ```

2. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π:**
   - –ó–∞–π—Ç–∏ –≤ Supabase Dashboard
   - Settings ‚Üí API ‚Üí Regenerate anon key
   - –û–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á–∏ –ª–æ–∫–∞–ª—å–Ω–æ –≤ `.env` (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)

3. **–î–ª—è –∫–æ–º–∞–Ω–¥—ã:**
   - –†–∞–∑–¥–∞–≤–∞—Ç—å `.env` —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 1Password, AWS Secrets Manager –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–µ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞

**–°–æ–∑–¥–∞—Ç—å:** `.env.local` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è Vite)

```env
# .env.local (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ Git!)
VITE_SUPABASE_URL=https://YOUR_PROJECT.supabase.co
VITE_SUPABASE_ANON_KEY=your_real_key_here
```

**–û–±–Ω–æ–≤–∏—Ç—å:** `.gitignore`

```gitignore
.env
.env.local
.env.*.local
```

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê #2: Bundle Size

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
dist/assets/index-BMlYENLI.js   1,237.24 kB ‚îÇ gzip: 346.25 kB
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- 1.24 MB ‚Äî —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- 346 KB gzip ‚Äî –¥–æ–ª–≥–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- –í–µ—Å—å –∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ—Å–µ—Ç–∏—Ç –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –†–µ—à–µ–Ω–∏–µ: Code Splitting

**1. Lazy Loading –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤**

```jsx
// src/App.jsx
import { lazy, Suspense } from 'react';

// –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ
const ProjectEditorRoute = lazy(() => import('./routes/ProjectEditorRoute'));
const CatalogsAdminPanel = lazy(() => import('./components/admin/CatalogsAdminPanel'));
const ApplicationsDashboard = lazy(() => import('./components/ApplicationsDashboard'));

// –í JSX:
<Suspense fallback={<div className="flex items-center justify-center h-screen">
    <Loader2 className="animate-spin text-blue-600"/>
</div>}>
    <Routes>
        <Route path="/" element={<ApplicationsDashboard ... />} />
        {/* ... */}
    </Routes>
</Suspense>
```

**2. –†–∞–∑–¥–µ–ª–∏—Ç—å vendors**

```js
// vite.config.js
export default defineConfig({
  plugins: [react()],
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          // React –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          
          // UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
          'ui-vendor': ['lucide-react', 'recharts'],
          
          // Data libraries
          'data-vendor': ['@tanstack/react-query', '@supabase/supabase-js'],
          
          // Zod
          'validation': ['zod']
        }
      }
    },
    // –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –¥–ª—è vendors (–Ω–µ –¥–ª—è app –∫–æ–¥–∞!)
    chunkSizeWarningLimit: 600
  }
})
```

**3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

```jsx
// Recharts –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–∞—à–±–æ—Ä–¥–∞
const SummaryDashboard = lazy(() => import('./components/editors/SummaryDashboard'));
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Å–Ω–æ–≤–Ω–æ–π –±–∞–Ω–¥–ª: ~400 KB
- Vendors chunks: ~600 KB (–∫–µ—à–∏—Ä—É—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º)
- –ö–∞–∂–¥—ã–π –º–∞—Ä—à—Ä—É—Ç: 50-100 KB
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞: **–º–µ–Ω—å—à–µ 1 —Å–µ–∫—É–Ω–¥—ã** (–≤–º–µ—Å—Ç–æ 3-4 —Å–µ–∫)

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê #3: Console Logs –≤ Production

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ

13 —Ñ–∞–π–ª–æ–≤ —Å–æ–¥–µ—Ä–∂–∞—Ç `console.log/error/warn`:

```
./src/App.jsx
./src/components/ApplicationsDashboard.jsx
./src/components/editors/FlatMatrixEditor.jsx
./src/context/ProjectContext.jsx
./src/lib/api-service.js
... –∏ –¥—Ä—É–≥–∏–µ
```

### –ü—Ä–æ–±–ª–µ–º—ã

- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** console.log –∑–∞–º–µ–¥–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ production
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ú–æ–≥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç–æ–∫–µ–Ω—ã, –ø–∞—Ä–æ–ª–∏)
- **–î–µ–±–∞–≥-–∏–Ω—Ñ–æ:** –í–∏–¥–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ

**1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å logger-–æ–±–µ—Ä—Ç–∫—É**

```js
// src/lib/logger.js
const isDev = import.meta.env.DEV;

export const logger = {
  log: (...args) => isDev && console.log(...args),
  warn: (...args) => isDev && console.warn(...args),
  error: (...args) => console.error(...args), // –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É–µ–º –≤—Å–µ–≥–¥–∞
  debug: (...args) => isDev && console.debug(...args)
};
```

**2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ console.* –Ω–∞ logger**

```jsx
// –ë—ã–ª–æ:
console.log('User logged in', user);

// –°—Ç–∞–ª–æ:
import { logger } from './lib/logger';
logger.log('User logged in', user);
```

**3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Vite –¥–ª—è production**

```js
// vite.config.js
export default defineConfig({
  esbuild: {
    drop: ['console', 'debugger'], // –£–¥–∞–ª—è–µ—Ç console/debugger –≤ production
  }
})
```

**4. ESLint –ø—Ä–∞–≤–∏–ª–æ**

```js
// eslint.config.js
rules: {
  'no-console': ['warn', { allow: ['error', 'warn'] }]
}
```

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê #4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–ü—Ä–∏–º–µ—Ä 1: –ü—É—Å—Ç–æ–π catch**

```js
// src/App.jsx:424
} catch (e) {
    console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π", e);
    if (mounted) setAvailablePersonas([]);
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –æ—à–∏–±–∫—É, —Ç–∏—Ö–∏–π fail.

**–ü—Ä–∏–º–µ—Ä 2: –¢–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

```js
// src/context/ProjectContext.jsx:109
} catch (e) {
    console.error(e);
    toast.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–¥–∞–Ω–∏—è');
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –¥–µ–±–∞–≥–∞.

### –†–µ—à–µ–Ω–∏–µ: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**1. –°–æ–∑–¥–∞—Ç—å Error Handler**

```js
// src/lib/error-handler.js
import { logger } from './logger';

export class AppError extends Error {
  constructor(message, { code, status, context = {} }) {
    super(message);
    this.code = code;
    this.status = status;
    this.context = context;
    this.timestamp = new Date().toISOString();
  }
}

export const errorHandler = {
  handle(error, { toast, context = {} }) {
    // 1. –õ–æ–≥–∏—Ä—É–µ–º —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    logger.error('Error occurred:', {
      message: error.message,
      stack: error.stack,
      context,
      timestamp: new Date().toISOString()
    });

    // 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    const userMessage = this.getUserMessage(error);
    toast?.error(userMessage);

    // 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Sentry/LogRocket
    // Sentry.captureException(error, { contexts: { app: context } });

    return { handled: true, userMessage };
  },

  getUserMessage(error) {
    // Supabase errors
    if (error.message?.includes('unique constraint')) {
      return '–ó–∞–ø–∏—Å—å —Å —Ç–∞–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç';
    }
    if (error.code === '23503') {
      return '–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å: —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç';
    }
    
    // Network errors
    if (error.message?.includes('fetch')) {
      return '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.';
    }

    // Custom app errors
    if (error instanceof AppError) {
      return error.message;
    }

    // Default
    return '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.';
  }
};
```

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö**

```jsx
// –ë—ã–ª–æ:
try {
  await ApiService.saveData(...);
} catch (e) {
  console.error(e);
  toast.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
}

// –°—Ç–∞–ª–æ:
try {
  await ApiService.saveData(...);
} catch (e) {
  errorHandler.handle(e, { 
    toast, 
    context: { action: 'saveData', projectId, buildingId } 
  });
}
```

**3. Error Boundary —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

```jsx
// src/components/ErrorBoundary.jsx
class ErrorBoundary extends React.Component {
  componentDidCatch(error, errorInfo) {
    errorHandler.handle(error, {
      context: { 
        componentStack: errorInfo.componentStack,
        boundary: this.props.name 
      }
    });
  }
  
  render() {
    if (this.state.hasError) {
      return (
        <div className="p-8 text-center">
          <h2 className="text-xl font-bold text-red-600 mb-4">
            –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
          </h2>
          <button 
            onClick={() => this.setState({ hasError: false })}
            className="btn-primary"
          >
            –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
          </button>
        </div>
      );
    }
    return this.props.children;
  }
}
```

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê #5: –†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã

```
src/App.jsx                           - 497 —Å—Ç—Ä–æ–∫ (—Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ!)
src/components/ApplicationsDashboard.jsx - 450+ —Å—Ç—Ä–æ–∫
src/lib/api-service.js                - 1784 —Å—Ç—Ä–æ–∫–∏ (–û–ì–†–û–ú–ù–´–ô!)
```

### –ü—Ä–æ–±–ª–µ–º—ã

- –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ú–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle

### –†–µ—à–µ–Ω–∏–µ

**1. –†–∞–∑–±–∏—Ç—å App.jsx**

```
src/
‚îú‚îÄ‚îÄ App.jsx (—Ç–æ–ª—å–∫–æ —Ä–æ—É—Ç–∏–Ω–≥, ~100 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ ProjectEditorRoute.jsx
‚îÇ   ‚îî‚îÄ‚îÄ MainLayout.jsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginScreen.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DevRoleSwitcher.jsx
‚îÇ   ‚îî‚îÄ‚îÄ ...
```

**2. –†–∞–∑–±–∏—Ç—å api-service.js**

```
src/lib/api/
‚îú‚îÄ‚îÄ index.js (—ç–∫—Å–ø–æ—Ä—Ç —Ñ–∞—Å–∞–¥–∞)
‚îú‚îÄ‚îÄ project-api.js (—É–∂–µ –µ—Å—Ç—å!)
‚îú‚îÄ‚îÄ workflow-api.js (—É–∂–µ –µ—Å—Ç—å!)
‚îú‚îÄ‚îÄ registry-api.js (—É–∂–µ –µ—Å—Ç—å!)
‚îú‚îÄ‚îÄ buildings-api.js (–≤—ã–Ω–µ—Å—Ç–∏ –∏–∑ api-service)
‚îú‚îÄ‚îÄ units-api.js
‚îî‚îÄ‚îÄ common.js (shared utils)
```

**3. –≠–∫—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ö—É–∫–∏**

```jsx
// –ë—ã–ª–æ –≤ App.jsx:
const [activePersona, setActivePersona] = useState(...);
useEffect(() => { /* 20 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∏–∫–∏ */ }, []);

// –°—Ç–∞–ª–æ:
// src/hooks/useActivePersona.js
export const useActivePersona = () => {
  const [activePersona, setActivePersona] = useState(...);
  
  useEffect(() => { /* –ª–æ–≥–∏–∫–∞ */ }, []);
  
  return { activePersona, setActivePersona };
};

// –í App.jsx:
const { activePersona, setActivePersona } = useActivePersona();
```

---

## üü° –ü–†–û–ë–õ–ï–ú–ê #6: TypeScript –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JSDoc –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö (–Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
- `global.d.ts` —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ
- –ú–Ω–æ–≥–æ `any` –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ TypeScript

**–§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)**

```bash
npm install -D typescript @types/react @types/react-dom
```

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "jsx": "react-jsx",
    "strict": false,  // –ü–æ–∫–∞ false, –≤–∫–ª—é—á–∏–º –ø–æ–∑–∂–µ
    "allowJs": true,  // –†–∞–∑—Ä–µ—à–∞–µ–º .js —Ñ–∞–π–ª—ã
    "checkJs": true,  // –ü—Ä–æ–≤–µ—Ä—è–µ–º .js —Ñ–∞–π–ª—ã
    "skipLibCheck": true,
    "esModuleInterop": true,
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true
  },
  "include": ["src"]
}
```

**–§–∞–∑–∞ 2: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤ (1-2 –Ω–µ–¥–µ–ª–∏)**

–ù–∞—á–∞—Ç—å —Å —É—Ç–∏–ª–∏—Ç –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:

```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
mv src/lib/constants.js src/lib/constants.ts
mv src/lib/types.js src/lib/types.ts
```

```ts
// src/lib/types.ts
export interface User {
  id: string;
  name: string;
  role: 'admin' | 'technician' | 'controller';
  group?: string;
}

export interface ProjectMeta {
  complexInfo: ComplexInfo;
  participants: Participants;
  cadastre: Cadastre;
  composition: Building[];
  applicationInfo: ApplicationInfo;
}

export interface ApplicationInfo {
  status: AppStatus;
  currentStage: number;
  currentStepIndex: number;
  verifiedSteps: number[];
  completedSteps: number[];
  rejectionReason: string | null;
  history: HistoryEntry[];
}

// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã
```

**–§–∞–∑–∞ 3: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)**

```tsx
// –ù–∞—á–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
mv src/components/ui/Skeleton.jsx src/components/ui/Skeleton.tsx

// src/components/ui/Skeleton.tsx
import React from 'react';

interface SkeletonProps {
  className?: string;
  variant?: 'text' | 'circular' | 'rectangular';
}

export const Skeleton: React.FC<SkeletonProps> = ({ 
  className = '', 
  variant = 'rectangular' 
}) => {
  // ...
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –≤ IDE
- ‚úÖ –õ–æ–≤–∏—Ç –æ—à–∏–±–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –õ—É—á—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–¥–∞
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ

---

## üü° –ü–†–û–ë–õ–ï–ú–ê #7: Performance - React Re-renders

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**1. ProjectContext –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç value –Ω–∞ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ**

```jsx
// src/context/ProjectContext.jsx:149
const value = {
  projectId,
  ...mergedState,
  isReadOnly,
  userProfile,
  hasUnsavedChanges,
  setHasUnsavedChanges,
  completeTask,
  rollbackTask,
  // ... 20+ –ø–æ–ª–µ–π
};

return <ProjectContext.Provider value={value}>{children}</ProjectContext.Provider>;
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `value` –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è ‚Üí –≤—Å–µ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ context'–∞ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**

```jsx
const value = useMemo(() => ({
  projectId,
  ...mergedState,
  isReadOnly,
  userProfile,
  hasUnsavedChanges,
  setHasUnsavedChanges,
  completeTask,
  rollbackTask,
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–µ
}), [
  projectId, 
  mergedState, 
  isReadOnly, 
  userProfile,
  hasUnsavedChanges,
  completeTask,
  rollbackTask,
  // ... –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
]);
```

**2. –†–∞–∑–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã**

```jsx
// –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ ProjectContext, —Å–æ–∑–¥–∞—Ç—å:
// 1. ProjectDataContext (—Ä–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è)
const ProjectDataContext = createContext();

// 2. ProjectActionsContext (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
const ProjectActionsContext = createContext();

// 3. ProjectStatusContext (—á–∞—Å—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è)
const ProjectStatusContext = createContext();

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω–æ–µ:
const { complexInfo } = useProjectData();        // –ù–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ hasUnsavedChanges
const { saveData } = useProjectActions();        // –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
const { hasUnsavedChanges } = useProjectStatus(); // –†–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
```

**3. React.memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

```jsx
// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Å–ø–∏—Å–∫–∞—Ö/—Ç–∞–±–ª–∏—Ü–∞—Ö
export const BuildingCard = React.memo(({ building, onEdit, onDelete }) => {
  // ...
}, (prevProps, nextProps) => {
  // –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
  return prevProps.building.id === nextProps.building.id &&
         prevProps.building.updated_at === nextProps.building.updated_at;
});
```

---

## üü° –ü–†–û–ë–õ–ï–ú–ê #8: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- –í—Å–µ –∫–ª–∞—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
- Sidebar –≤—Å–µ–≥–¥–∞ 72 –∏–ª–∏ 288px
- –¢–∞–±–ª–∏—Ü—ã –Ω–µ —Å–∫—Ä–æ–ª–ª—è—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö
- –ö–Ω–æ–ø–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ –¥–ª—è touch-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**1. Responsive Sidebar**

```jsx
// src/components/Sidebar.jsx
const Sidebar = ({ isOpen, onToggle, ... }) => {
  const isMobile = useMediaQuery('(max-width: 768px)');
  
  return (
    <>
      {/* Backdrop –¥–ª—è –º–æ–±–∏–ª–∫–∏ */}
      {isMobile && isOpen && (
        <div 
          className="fixed inset-0 bg-black/50 z-40"
          onClick={onToggle}
        />
      )}
      
      {/* –°–∞–º Sidebar */}
      <aside className={`
        fixed lg:relative
        h-full
        transition-transform duration-300
        z-50
        ${isMobile 
          ? (isOpen ? 'translate-x-0' : '-translate-x-full') 
          : ''
        }
        ${isOpen ? 'w-72' : 'w-20'}
      `}>
        {/* ... */}
      </aside>
    </>
  );
};
```

**2. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã**

```jsx
// Card view –¥–ª—è –º–æ–±–∏–ª–æ–∫, —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞
<div className="hidden md:block">
  <table className="w-full">
    {/* –û–±—ã—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ */}
  </table>
</div>

<div className="md:hidden space-y-4">
  {items.map(item => (
    <div key={item.id} className="bg-white rounded-lg p-4 shadow">
      <div className="flex justify-between mb-2">
        <span className="font-bold">{item.name}</span>
        <span className="text-sm text-gray-500">{item.status}</span>
      </div>
      <div className="text-sm text-gray-600">
        {item.description}
      </div>
    </div>
  ))}
</div>
```

**3. Touch-friendly UI**

```css
/* src/index.css */

/* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–æ–∫/—Å—Å—ã–ª–æ–∫: 44x44px (Apple HIG) */
.btn, button, a {
  @apply min-h-[44px] min-w-[44px];
}

/* –£–≤–µ–ª–∏—á–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
@media (max-width: 768px) {
  .container {
    @apply px-4;
  }
  
  input, select, textarea {
    @apply text-base; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ –Ω–∞ iOS */
  }
}
```

**4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Tailwind breakpoints**

```jsx
<div className="
  grid 
  grid-cols-1 
  md:grid-cols-2 
  lg:grid-cols-3 
  xl:grid-cols-4 
  gap-4
">
  {/* Cards */}
</div>
```

---

## üü° –ü–†–û–ë–õ–ï–ú–ê #9: CI/CD –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: GitHub Actions

**1. –°–æ–∑–¥–∞—Ç—å `.github/workflows/ci.yml`**

```yaml
name: CI

on:
  push:
    branches: [main, develop, cursor/**]
  pull_request:
    branches: [main, develop]

jobs:
  lint-and-test:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run linter
        run: npm run lint
      
      - name: Run tests
        run: npm run test:smoke
      
      - name: Build
        run: npm run build
        env:
          VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
          VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
      
      - name: Check bundle size
        run: |
          SIZE=$(du -sb dist/assets/*.js | awk '{sum+=$1} END {print sum}')
          echo "Bundle size: $SIZE bytes"
          if [ $SIZE -gt 1500000 ]; then
            echo "‚ùå Bundle too large!"
            exit 1
          fi
```

**2. –°–æ–∑–¥–∞—Ç—å `.github/workflows/deploy.yml`**

```yaml
name: Deploy to Production

on:
  push:
    tags:
      - 'v*'

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build
        run: npm run build
        env:
          VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL_PROD }}
          VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY_PROD }}
      
      - name: Deploy to Netlify/Vercel
        # ... deploy step
```

---

## üü° –ü–†–û–ë–õ–ï–ú–ê #10: E2E —Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- ‚úÖ –ï—Å—Ç—å smoke tests –¥–ª—è workflow
- ‚ùå –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ—Ç E2E —Ç–µ—Å—Ç–æ–≤ UI

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Playwright

**1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞**

```bash
npm install -D @playwright/test
npx playwright install
```

**2. –°–æ–∑–¥–∞—Ç—å `playwright.config.js`**

```js
import { defineConfig } from '@playwright/test';

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
  },

  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI,
  },
});
```

**3. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã**

```js
// tests/e2e/auth.spec.js
import { test, expect } from '@playwright/test';

test('user can login', async ({ page }) => {
  await page.goto('/');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤–∏–¥–∏–º –ª–æ–≥–∏–Ω-—Å–∫—Ä–∏–Ω
  await expect(page.locator('h1')).toContainText('–†–µ–µ—Å—Ç—Ä –ú–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã—Ö –¥–æ–º–æ–≤');
  
  // –í—ã–±–∏—Ä–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  await page.selectOption('select', { index: 0 });
  
  // –ö–ª–∏–∫–∞–µ–º "–í–æ–π—Ç–∏"
  await page.click('button:has-text("–í–æ–π—Ç–∏")');
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–æ–ø–∞–ª–∏ –≤ dashboard
  await expect(page).toHaveURL(/\//);
  await expect(page.locator('text=–ú–æ–∏ –∑–∞–¥–∞—á–∏')).toBeVisible();
});
```

```js
// tests/e2e/workflow.spec.js
test('complete full workflow', async ({ page }) => {
  // 1. –õ–æ–≥–∏–Ω
  await loginAsAdmin(page);
  
  // 2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
  await page.click('button:has-text("–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç")');
  await page.fill('input[name="name"]', 'Test Complex');
  await page.click('button:has-text("–°–æ–∑–¥–∞—Ç—å")');
  
  // 3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç
  await fillPassport(page, {
    name: 'Test Complex',
    address: 'Test Address'
  });
  await page.click('button:has-text("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")');
  
  // 4. –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É
  await page.click('button:has-text("–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É")');
  
  // 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥
  await expect(page.locator('.step-indicator')).toContainText('–®–∞–≥ 2');
});
```

---

## üí° –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. Accessibility (a11y)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ú–Ω–æ–≥–∏–µ –∫–Ω–æ–ø–∫–∏ –±–µ–∑ `aria-label`
- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –±–µ–∑ focus trap
- –ù–µ—Ç keyboard navigation –¥–ª—è —Ç–∞–±–ª–∏—Ü

**–†–µ—à–µ–Ω–∏–µ:**

```jsx
// –î–æ–±–∞–≤–∏—Ç—å aria-labels
<button 
  onClick={onClose}
  aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ"
>
  <X size={16} />
</button>

// Focus trap –¥–ª—è –º–æ–¥–∞–ª–æ–∫
import { useFocusTrap } from '@/hooks/useFocusTrap';

const Modal = ({ isOpen, onClose, children }) => {
  const modalRef = useFocusTrap(isOpen);
  
  useEffect(() => {
    const handleEscape = (e) => {
      if (e.key === 'Escape') onClose();
    };
    
    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
      return () => document.removeEventListener('keydown', handleEscape);
    }
  }, [isOpen, onClose]);
  
  if (!isOpen) return null;
  
  return (
    <div 
      ref={modalRef}
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
    >
      {children}
    </div>
  );
};
```

### 2. Lighthouse Score

**–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- Images –±–µ–∑ width/height (CLS)
- –ù–µ—Ç preload –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- –ù–µ—Ç meta description

**–£–ª—É—á—à–µ–Ω–∏—è –≤ `index.html`:**

```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –º–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã—Ö –¥–æ–º–æ–≤ –¥–ª—è –ö–∞–¥–∞—Å—Ç—Ä –ê–≥–µ–Ω—Ç–ª–∏–≥–∏" />
  <meta name="theme-color" content="#0F172A" />
  
  <!-- Preload critical assets -->
  <link rel="preload" href="/src/main.jsx" as="script" />
  <link rel="preconnect" href="https://rhfllxqyjgvlodnxlgvz.supabase.co" />
  
  <title>–†–µ–µ—Å—Ç—Ä –ú–ö–î | –ö–∞–¥–∞—Å—Ç—Ä –ê–≥–µ–Ω—Ç–ª–∏–≥–∏</title>
</head>
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

1. **Sentry** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫:

```bash
npm install @sentry/react
```

```js
// src/main.jsx
import * as Sentry from "@sentry/react";

if (import.meta.env.PROD) {
  Sentry.init({
    dsn: "YOUR_SENTRY_DSN",
    integrations: [
      Sentry.browserTracingIntegration(),
      Sentry.replayIntegration(),
    ],
    tracesSampleRate: 0.1,
    replaysSessionSampleRate: 0.1,
    replaysOnErrorSampleRate: 1.0,
  });
}
```

2. **PostHog** –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```bash
npm install posthog-js
```

```js
// src/lib/analytics.js
import posthog from 'posthog-js';

if (import.meta.env.PROD) {
  posthog.init('YOUR_API_KEY', {
    api_host: 'https://app.posthog.com',
  });
}

export const analytics = {
  track(event, properties) {
    if (import.meta.env.PROD) {
      posthog.capture(event, properties);
    }
  },
  
  identify(userId, traits) {
    if (import.meta.env.PROD) {
      posthog.identify(userId, traits);
    }
  }
};
```

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–¥–∞

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- JSDoc –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```js
/**
 * –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Supabase
 * 
 * @param {string} dbScope - Scope –æ–∫—Ä—É–∂–µ–Ω–∏—è (shared_dev_env | user_id)
 * @param {string} projectId - UUID –ø—Ä–æ–µ–∫—Ç–∞
 * @param {Object} updates - –û–±—ä–µ–∫—Ç —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
 * @param {Object} [updates.complexInfo] - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–ª–µ–∫—Å–µ
 * @param {Object} [updates.participants] - –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
 * @param {Array} [updates.composition] - –°–æ—Å—Ç–∞–≤ –∑–¥–∞–Ω–∏–π
 * 
 * @returns {Promise<void>}
 * 
 * @throws {Error} –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
 * @throws {Error} –ï—Å–ª–∏ –Ω–∞—Ä—É—à–µ–Ω—ã constraints –ë–î
 * 
 * @example
 * await ApiService.saveData('shared_dev_env', projectId, {
 *   complexInfo: { name: 'New Name' }
 * });
 */
async saveData(dbScope, projectId, updates) {
  // ...
}
```

### 5. Storybook –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è UI Kit

```bash
npx storybook@latest init
```

```jsx
// src/components/ui/Button.stories.jsx
export default {
  title: 'UI/Button',
  component: Button,
  tags: ['autodocs'],
};

export const Primary = {
  args: {
    variant: 'primary',
    children: 'Click me',
  },
};

export const Loading = {
  args: {
    isLoading: true,
    children: 'Loading...',
  },
};
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–• –ó–ê–î–ê–ß

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Å–¥–µ–ª–∞—Ç—å –ù–ï–ú–ï–î–õ–ï–ù–ù–û)

- [ ] **–£–¥–∞–ª–∏—Ç—å `.env` –∏–∑ Git** –∏ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏ Supabase
- [ ] **–î–æ–±–∞–≤–∏—Ç—å `.env` –≤ `.gitignore`**
- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å secrets –≤ GitHub/CI**

### üü† –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1-2 –Ω–µ–¥–µ–ª–∏)

- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å code splitting (lazy loading –º–∞—Ä—à—Ä—É—Ç–æ–≤)
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å console.* –Ω–∞ logger
- [ ] –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (errorHandler)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD (GitHub Actions)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ E2E —Ç–µ—Å—Ç—ã (Playwright)

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1-2 –º–µ—Å—è—Ü–∞)

- [ ] –†–∞–∑–±–∏—Ç—å –±–æ–ª—å—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –º–µ–Ω—å—à–∏–µ
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å React re-renders (useMemo, React.memo)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –ù–∞—á–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ TypeScript
- [ ] –í–Ω–µ–¥—Ä–∏—Ç—å Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (backlog)

- [ ] –£–ª—É—á—à–∏—Ç—å accessibility (WCAG AA)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Storybook
- [ ] –î–æ–±–∞–≤–∏—Ç—å PostHog –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Lighthouse Score
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## üìä –ú–ï–¢–†–ò–ö–ò –î–û/–ü–û–°–õ–ï

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ (–ø—Ä–æ–≥–Ω–æ–∑) | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-----------------|-----------|
| **Bundle size** | 1.24 MB | ~600 KB | ‚¨áÔ∏è 52% |
| **First Load** | 3-4 —Å–µ–∫ | <1 —Å–µ–∫ | ‚¨áÔ∏è 70% |
| **Lighthouse Performance** | ~75 | 90+ | ‚¨ÜÔ∏è 20% |
| **Linter warnings** | 6 | 0 | ‚úÖ |
| **Test coverage** | 5% (smoke) | 60%+ | ‚¨ÜÔ∏è 55% |
| **Security issues** | 1 critical | 0 | ‚úÖ |
| **TypeScript coverage** | 0% | 80%+ | ‚¨ÜÔ∏è 80% |

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã: **7/10** üëç

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Å–ª–æ–∏ data/sync/workflow)
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:**
- ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Å–µ–∫—Ä–µ—Ç—ã –≤ Git)
- ‚ö†Ô∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (bundle size)
- ‚ö†Ô∏è Production-readiness (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—à–∏–±–∫–∏)

**–í–µ—Ä–¥–∏–∫—Ç:**
–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **—Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏** –¥–ª—è DEV-–æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –≤ production. –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏ ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω:**
1. ‚úÖ –ó–∞–∫—Ä—ã—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (1 –¥–µ–Ω—å)
2. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å bundle (3-5 –¥–Ω–µ–π)
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD (2-3 –¥–Ω—è)
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã (1 –Ω–µ–¥–µ–ª—è)
5. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ TypeScript (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, 1-2 –º–µ—Å—è—Ü–∞)

**–ò—Ç–æ–≥–æ:** –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production —á–µ—Ä–µ–∑ **2-3 –Ω–µ–¥–µ–ª–∏** –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 8 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–ê–≤—Ç–æ—Ä:** AI Assistant (Claude Sonnet 4.5)

_–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–ª–µ–¥—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ –º–µ—Ä–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π._
